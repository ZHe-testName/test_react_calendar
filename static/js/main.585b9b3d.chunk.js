(this.webpackJsonptest_react_calendar=this.webpackJsonptest_react_calendar||[]).push([[0],{193:function(e,t,n){},194:function(e,t,n){},303:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),s=n(27),u=n.n(s),o=(n(193),n(308)),i=(n(194),n(23)),l=n(28),j=n(85),d=j.c,f=n(89),b=n(309),h=n(310),O=n(314),p=n(58),E=n(88),x=n(42),m=n.n(x),S=n(66);!function(e){e.SET_AUTH="SET_AUTH",e.SET_USER="SET_USER",e.SWITCH_IS_LOAD="SWITCH_IS_LOAD",e.SET_ERROR="SET_ERROR"}(r||(r={}));var v,g=n(172),y=n(173),T=n(174),I=n.n(T),_=function(){function e(){Object(g.a)(this,e)}return Object(y.a)(e,null,[{key:"getUsers",value:function(){var e=Object(S.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.a.get("./users.json"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),D={isAuth:!1,user:{},isLoading:!1,error:""},w={setUser:function(e){return{type:r.SET_USER,payload:e}},setError:function(e){return{type:r.SET_ERROR,payload:e}},setIsAuth:function(e){return{type:r.SET_AUTH,payload:e}},switchIsLoading:function(e){return{type:r.SWITCH_IS_LOAD,payload:e}},login:function(e,t){return function(){var n=Object(S.a)(m.a.mark((function n(r){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(w.switchIsLoading(!0)),r(w.setError("")),setTimeout(Object(S.a)(m.a.mark((function n(){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.getUsers().then((function(n){return n.data.find((function(n){return n.username===e&&n.password===t}))}));case 2:if(c=n.sent){n.next=7;break}return r(w.setError("Entered uncorect username or password!")),r(w.switchIsLoading(!1)),n.abrupt("return");case 7:localStorage.setItem("auth","true"),localStorage.setItem("user",c.username),r(w.setUser(c)),r(w.setIsAuth(!0)),r(w.switchIsLoading(!1));case 13:case"end":return n.stop()}}),n)}))),1500)}catch(c){r(w.setError("Error"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(e){localStorage.removeItem("auth"),localStorage.removeItem("user"),e(w.setIsAuth(!1)),e(w.setUser({}))}}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(i.a)(Object(i.a)({},e),{},{isAuth:t.payload});case r.SET_USER:return Object(i.a)(Object(i.a)({},e),{},{user:t.payload});case r.SET_ERROR:return Object(i.a)(Object(i.a)({},e),{},{error:t.payload});case r.SWITCH_IS_LOAD:return Object(i.a)(Object(i.a)({},e),{},{isLoading:t.payload});default:return e}};!function(e){e.SET_USERS="SET_USERS",e.SET_EVENTS="SET_EVENTS",e.SET_SELECTED_DATE="SET_SELECTED_DATE",e.SET_IS_DONE="SET_IS_DONE"}(v||(v={}));var k,A={events:[],guests:[],selectDate:""},N={setUsers:function(e){return{type:v.SET_USERS,payload:e}},setEvents:function(e){return{type:v.SET_EVENTS,payload:e}},setSelectedDate:function(e){return{type:v.SET_SELECTED_DATE,payload:e}},fetchUsersThunk:function(){return function(){var e=Object(S.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.getUsers();case 3:n=e.sent,t(N.setUsers(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEventThunk:function(e,t){return function(){var n=Object(S.a)(m.a.mark((function n(r){var c,a,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{c=localStorage.getItem("events")||"[]",(a=JSON.parse(c)).push(e),s=a.filter((function(e){return e.guest===t})),r(N.setEvents(s)),localStorage.setItem("events",JSON.stringify(a))}catch(u){console.log(u)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fetchEventThunk:function(e){return function(t){try{var n=localStorage.getItem("events")||"[]",r=JSON.parse(n).filter((function(t){return t.guest===e}));t(N.setEvents(r))}catch(c){console.log(c)}}},fetchIsDoneThunk:function(e,t,n){return function(r){try{var c=localStorage.getItem("events")||"[]",a=JSON.parse(c).map((function(n){return n.id===t?Object(i.a)(Object(i.a)({},n),{},{isDone:e}):n}));localStorage.setItem("events",JSON.stringify(a)),r(N.setEvents(a.filter((function(e){return e.guest===n}))))}catch(s){console.log(s)}}}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SET_USERS:return Object(i.a)(Object(i.a)({},e),{},{guests:t.payload});case v.SET_EVENTS:return Object(i.a)(Object(i.a)({},e),{},{events:t.payload});case v.SET_SELECTED_DATE:return Object(i.a)(Object(i.a)({},e),{},{selectDate:t.payload});default:return e}},C=Object(i.a)(Object(i.a)({},w),N),L=function(){var e=Object(j.b)();return Object(E.b)(C,e)},q=n(56),J=n.n(q),H={required:function(e){return{required:!0,message:e}},isDateAfter:function(e){return{validator:function(t,n){return n.isSameOrAfter(J()())?Promise.resolve():Promise.reject(new Error(e))}}}},V=n(7),P=function(){var e=d((function(e){return e.authReducer})),t=e.isLoading,n=e.error,r=L().login;return Object(V.jsxs)(h.a,{onFinish:function(e){r(e.username,e.password)},children:[n&&Object(V.jsx)("div",{style:{color:"tomato"},children:n}),Object(V.jsx)(h.a.Item,{label:"User Name",name:"username",rules:[H.required("Please input your name!")],children:Object(V.jsx)(O.a,{})}),Object(V.jsx)(h.a.Item,{label:"Password",name:"password",rules:[H.required("Please input your password!")],children:Object(V.jsx)(O.a.Password,{})}),Object(V.jsx)(h.a.Item,{children:Object(V.jsx)(p.a,{type:"primary",htmlType:"submit",loading:t,children:"Submit"})})]})},z=function(){return Object(V.jsx)(o.a,{children:Object(V.jsx)(f.a,{justify:"center",align:"middle",className:"h100",children:Object(V.jsx)(b.a,{children:Object(V.jsx)(P,{})})})})},G=n(96),W=n(313),M=n(317),F=n(315),B=function(e){return e.slice(0,10)},Y=function(e){var t=e.events,n=e.showEventModal,r=L().setSelectedDate;return Object(V.jsx)(F.a,{onSelect:function(e){r(B(e.toJSON())),n()},dateCellRender:function(e){var n=B(e.toJSON()),r=t.filter((function(e){return e.date===n}));return Object(V.jsx)("ul",{style:{listStyleType:"none",padding:"0px"},children:r.map((function(e){return Object(V.jsx)("li",{children:Object(V.jsx)(M.a,{status:e.isDone?"default":"success",text:e.description})},e.id)}))})}})},K=n(312),Q=n(148),X=n(318),Z=function(e){var t=e.guests,n=e.submit,r=Object(c.useState)({author:"",date:"",description:"",guest:"",isDone:!1,id:""}),a=Object(G.a)(r,2),s=a[0],u=a[1],o=d((function(e){return e.authReducer})).user;return Object(V.jsxs)(h.a,{onFinish:function(){n(Object(i.a)(Object(i.a)({},s),{},{author:o.username,id:Object(X.a)()}))},children:[Object(V.jsx)(h.a.Item,{label:"Event subject",name:"description",rules:[H.required("Required field")],children:Object(V.jsx)(O.a.TextArea,{value:s.description,onChange:function(e){return u(Object(i.a)(Object(i.a)({},s),{},{description:e.target.value}))}})}),Object(V.jsx)(h.a.Item,{label:"Select date",name:"date",rules:[H.required("Date is required"),H.isDateAfter("You can choose this day or feature date only.")],children:Object(V.jsx)(K.a,{onChange:function(e){return function(e){e&&u(Object(i.a)(Object(i.a)({},s),{},{date:B(e.toJSON())}))}(e)}})}),Object(V.jsx)(h.a.Item,{label:"Select executor",name:"executor",rules:[H.required("Executor is required")],children:Object(V.jsx)(Q.a,{onChange:function(e){return u(Object(i.a)(Object(i.a)({},s),{},{guest:e}))},children:t.map((function(e){return Object(V.jsx)(Q.a.Option,{value:e.username,children:e.username},e.password)}))})}),Object(V.jsx)(f.a,{justify:"end",children:Object(V.jsx)(h.a.Item,{children:Object(V.jsx)(p.a,{type:"primary",htmlType:"submit",children:"Add"})})})]})},$=n(311),ee=n(316),te=n(320),ne=n(321),re=function(e){var t=e.events,n=e.selectDate,r=L().fetchIsDoneThunk,c=[],a=d((function(e){return e.authReducer})).user,s=t.filter((function(e){return e.date===n}));return new Set(s.map((function(e){return e.author}))).forEach((function(e){return c.push(e)})),Object(V.jsx)(h.a,{children:s.length?c.map((function(e,t){return Object(V.jsxs)(h.a.Item,{label:"author",children:[Object(V.jsxs)("div",{children:[Object(V.jsx)(ee.a,{icon:Object(V.jsx)(ne.a,{}),shape:"square",style:{marginRight:"10px",color:"white",backgroundColor:"tomato"}}),e]}),Object(V.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:s.filter((function(t){return t.author===e})).map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsx)(M.a,{status:e.isDone?"default":"success",text:e.description,style:{marginLeft:"40px"}}),Object(V.jsx)(te.a,{onChange:function(){r(!e.isDone,e.id,a.username)},checked:e.isDone,style:{marginLeft:"40px"},children:"Done"})]},e.id)}))})]},e+t)})):Object(V.jsx)($.a.Text,{type:"danger",style:{fontSize:"21px"},children:"No any events for this date."})})},ce=function(){var e=Object(c.useState)(!1),t=Object(G.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(G.a)(a,2),u=s[0],o=s[1],i=L(),l=i.fetchUsersThunk,j=i.createEventThunk,b=i.fetchEventThunk,h=d((function(e){return e.eventReducer})),O=h.guests,E=h.events,x=h.selectDate,m=d((function(e){return e.authReducer})).user;Object(c.useEffect)((function(){l(),b(m.username)}),[]);return Object(V.jsxs)("div",{children:[Object(V.jsx)(Y,{events:E,showEventModal:function(){o(!0)}}),Object(V.jsx)(f.a,{justify:"center",style:{margin:"20px 0px"},children:Object(V.jsx)(p.a,{size:"large",type:"primary",onClick:function(){r(!0)},children:"Add Event"})}),Object(V.jsxs)(W.a,{title:"Add an event",visible:n,footer:null,onCancel:function(){r(!1)},children:[Object(V.jsx)("p",{children:"Create an event task for some one..."}),Object(V.jsx)(Z,{guests:O,submit:function(e){j(e,m.username),r(!1)}})]}),Object(V.jsxs)(W.a,{title:"Event(s)",visible:u,footer:null,onCancel:function(){o(!1)},children:[Object(V.jsx)("p",{children:"Tasks for this day"}),Object(V.jsx)(re,{events:E,selectDate:x})]})]})};!function(e){e.LOGIN="/login",e.EVENTS="/"}(k||(k={}));var ae=[{path:k.EVENTS,exact:!0,component:ce}],se=[{path:k.LOGIN,exact:!0,component:z}],ue=function(){return d((function(e){return e.authReducer.isAuth}))?Object(V.jsxs)(l.d,{children:[ae.map((function(e){return Object(c.createElement)(l.b,Object(i.a)(Object(i.a)({},e),{},{key:e.path}))})),Object(V.jsx)(l.a,{to:k.EVENTS})]}):Object(V.jsxs)(l.d,{children:[se.map((function(e){return Object(c.createElement)(l.b,Object(i.a)(Object(i.a)({},e),{},{key:e.path}))})),Object(V.jsx)(l.a,{to:k.LOGIN})]})},oe=n(319),ie=function(){var e=Object(l.g)(),t=d((function(e){return e.authReducer})),n=t.isAuth,r=t.user,c=L().logout;return Object(V.jsx)(o.a.Header,{children:n?Object(V.jsxs)(oe.a,{theme:"dark",mode:"horizontal",selectable:!1,style:{justifyContent:"flex-end"},children:[Object(V.jsx)(oe.a.Item,{style:{color:"white",cursor:"auto"},disabled:!0,children:r.username},1),Object(V.jsx)(oe.a.Item,{onClick:function(){c()},children:"Logoff"},2)]}):Object(V.jsx)(oe.a,{theme:"dark",mode:"horizontal",selectable:!1,style:{justifyContent:"flex-end"},children:Object(V.jsx)(oe.a.Item,{onClick:function(){return e.push(k.LOGIN)},children:"Login"},1)})})},le=function(){var e=L(),t=e.setIsAuth,n=e.setUser;return Object(c.useEffect)((function(){localStorage.getItem("auth")&&(t(!0),n({username:localStorage.getItem("user")}))}),[]),Object(V.jsx)(o.a,{children:Object(V.jsxs)("div",{className:"App",children:[Object(V.jsx)(ie,{}),Object(V.jsx)(o.a.Content,{children:Object(V.jsx)(ue,{})})]})})},je=n(143),de=n(181),fe={authReducer:R,eventReducer:U},be=Object(E.c)(fe),he=Object(E.d)(be,Object(E.a)(de.a));u.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(j.a,{store:he,children:Object(V.jsx)(je.a,{children:Object(V.jsx)(le,{})})})}),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.585b9b3d.chunk.js.map